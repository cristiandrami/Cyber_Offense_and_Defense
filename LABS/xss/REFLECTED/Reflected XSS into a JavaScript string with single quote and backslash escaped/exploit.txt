
https://portswigger.net/web-security/cross-site-scripting/contexts/lab-javascript-string-single-quote-backslash-escaped

This lab contains a reflected cross-site scripting vulnerability in the search query tracking functionality. The reflection occurs inside a JavaScript string with single quotes and backslashes escaped.

To solve this lab, perform a cross-site scripting attack that breaks out of the JavaScript string and calls the alert function.



1) search fot something like "test" 
2) in the source page you can see that test is reflected into variable of a script
    <script>
        var searchTerms = 'test';
        document.write('<img src="/resources/images/tracker.gif?searchTerms='+encodeURIComponent(searchTerms)+'">');
    </script>

3) now if we try to inject 'test to break the string it is escaped
    var searchTerms = '\'test';

4) but if we try to inject </script> we are able to break the script at all

5) so we can use this payload to trigger an alert
    </script> <script> alert() </script>



NOTE: The reason this works is that the browser first performs HTML parsing to identify the page elements including blocks of script, and only later performs JavaScript parsing to understand and execute the embedded scripts. 
